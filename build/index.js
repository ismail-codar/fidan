function e(e){var n=this,t=[],r={itemadded:[],itemremoved:[],itemset:[],beforemulti:[],aftermulti:[]};function o(e){e in n||Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){return t[e]},set:function(n){t[e]=n,i({type:"itemset",index:e,item:n})}})}function i(e){r[e.type].forEach(function(t){t.call(n,e)})}n.on=function(e,n){r[e].push(n)},n.off=function(e,n){for(var t=r[e],o=t.length;--o>=0;)t[o]===n&&t.splice(o,1)},n.push=function(){var e,n=arguments;arguments.length>1&&i({type:"beforemulti"});for(var r=0,u=arguments.length;r<u;r++)e=t.length,t.push(n[r]),o(e),i({type:"itemadded",index:e,item:n[r]});return arguments.length>1&&i({type:"aftermulti"}),t.length},n.pop=function(){if(t.length>-1){var e=t.length-1,r=t.pop();return delete n[e],i({type:"itemremoved",index:e,item:r}),r}},n.unshift=function(){for(var e=arguments,n=0,r=arguments.length;n<r;n++)t.splice(n,0,e[n]),o(t.length-1),i({type:"itemadded",index:n,item:e[n]});for(;n<t.length;n++)i({type:"itemset",index:n,item:t[n]});return t.length},n.shift=function(){if(t.length>-1){var e=t.shift();return delete n[t.length],i({type:"itemremoved",index:0,item:e}),e}},n.splice=function(e,r){var u,l=arguments,a=[];for(e=null==e?0:e<0?t.length+e:e,r=null==r?t.length-e:r>0?r:0;r--;)u=t.splice(e,1)[0],a.push(u),delete n[t.length],i({type:"itemremoved",index:e+a.length-1,item:u});for(var c=2,s=arguments.length;c<s;c++)t.splice(e,0,l[c]),o(t.length-1),i({type:"itemadded",index:e,item:l[c]}),e++;return a},Object.defineProperty(n,"length",{configurable:!1,enumerable:!1,get:function(){return t.length},set:function(e){var r=Number(e),o=t.length;if(!(r%1==0&&r>=0))throw new RangeError("Invalid array length");return r<o?n.splice(r):r>o&&n.push.apply(n,new Array(r-o)),t.length=r,e}}),Object.defineProperty(n,"innerArray",{configurable:!1,enumerable:!1,get:function(){return t},set:function(e){t=e;for(var n=0;n<e.length;n++)o(n)}}),Object.getOwnPropertyNames(Array.prototype).forEach(function(e){e in n||Object.defineProperty(n,e,{configurable:!1,enumerable:!1,writable:!1,value:Array.prototype[e]})}),n.toJSON=function(){return t},Array.isArray(e)&&n.push.apply(n,e)}var n=function(e,n){if(e&&null!=e.$val)throw"Fidan: Higher ordered signals is not supported.";var t=function(e){if(void 0===e)return t.$val;Array.isArray(e)?t.$val.innerArray=e:t.$val=e;var n=t.depends;if(n.length)for(var r=0;r<n.length;r++)!n[r].freezed&&n[r](n[r].compute())};return t.$val=e,t.freezed=n,t.depends=[],t.toString=t.toJSON=function(){return t.$val.toString()},t},t=function(t){var r=n(new e(t));return r.on=r.$val.on,r.off=r.$val.off,r.toJSON=function(){return r.$val.innerArray},r},r=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];var o=n();o.compute=e;for(var i=0;i<t.length;i++)t[i].depends.push(o);e()},o=function(e){for(var t=[],o=arguments.length-1;o-- >0;)t[o]=arguments[o+1];var i=n(e());return r.apply(void 0,[function(){i(e())}].concat(t)),i},i=function(e){delete e.compute,delete e.depends},u=function(e,n,t){var r=typeof t;"function"===r?t(e):("object"!==r&&(t=document.createTextNode(t)),e.insertBefore(t,e.children[n]))},l=function(n,t,o){var i=n.$val instanceof e?n.$val:new e(n.$val),l=n.$val,a=null;i.on("beforemulti",function(){t.parentNode&&(a={parent:t,next:t.nextElementSibling},t=document.createDocumentFragment())}),i.on("aftermulti",function(){a&&(a.parent.insertBefore(t,a.next),t=a.parent)}),i.on("itemadded",function(e){u(t,e.index,o(e.item,e.index))}),i.on("itemset",function(e){t.replaceChild(o(e.item,e.index),t.children.item(e.index))}),i.on("itemremoved",function(e){t.removeChild(t.children.item(e.index))}),n(i),r(function(){if(0===l.length)t.textContent="";else{var e=null,n=document.createDocumentFragment();t.textContent="";for(var r=t.childElementCount;r<l.length;r++)"object"!=typeof(e=o(l[r],r))&&(e=document.createTextNode(e)),n.insertBefore(e,t.children[r]);t.appendChild(n)}},n)},a={id:!0,nodeValue:!0,textContent:!0,className:!0,innerHTML:!0,innerText:!0,tabIndex:!0,value:!0},c=!1,s=document.createElement("template"),f=function(e,n,t){for(var r=n;r>=0;r--){var o=e[r],i=o.lastIndexOf("<");if(-1!==i){e[r]=o.substr(0,i)+t+o.substr(i);break}}},d=function(e,n){var t=[];!function(e,n){for(var t=document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,{acceptNode:function(e){return e.nodeValue.trim().startsWith("cmt_")?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},!1);t.nextNode();)n.push(t.currentNode)}(e,t);for(var o=function(e){var o=t[e],i=o.nodeValue,u=null,l=null,c=i.indexOf("_")+1,s=i.indexOf("_",c),f=parseInt(i.substr(c,s-c));c=i.indexOf("_",s)+1,-1===(s=i.indexOf("_",c))&&(s=i.indexOf(" ",c));var d=parseInt(i.substr(c,s-c)),p=n[d];if(3&f){if(1===f){if(l="textContent",u=document.createTextNode(p.$val),o.parentElement.insertBefore(u,o.nextSibling),!p.hasOwnProperty("$val")&&Array.isArray(p))for(var h=0;h<p.length;h++)o.parentElement.appendChild(p[h])}else 2===f&&(l=i.substr(s+1,i.length-s-2),u=o.nextElementSibling);l.startsWith("on")?u.addEventListener(l.substr(2),p):p.hasOwnProperty("$val")?r(a[l]?function(){u[l]=p.$val}:function(){u.setAttribute(l,p.$val)},p):a[l]?u[l]=p:u.setAttribute(l,p)}else 4===f?p(o):8===f&&o.parentElement.insertBefore(p,o.nextSibling)},i=0;i<t.length;i++)o(i)},p=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()},h=[],v={},m=function(e,n){v[e]||(v[e]=[]),v[e].push(n),h.push(e)},b=function(e){e.$context||Object.defineProperty(e,"$context",{configurable:!1,enumerable:!1,value:{}});for(var n=null,t=0;t<h.length;t++)e.$context[n=h[t]]=v[n][v[n].length-1]},g=function(e){v[e].pop(),h.pop()},y=function(e){for(var n in e)m(n,e[n])},x=function(e){for(var n in e)g(n)},$=/^on[A-Z]/,N=Symbol("fjsx.Fragment"),O=function(e,n,t){var r=null;for(var o in n)if(null!=(r=n[o]))if(r instanceof Function)$.test(o)?e[o=o.toLowerCase()]=r:r(e);else if(r instanceof Object)if(Array.isArray(r))E(e,r);else for(var i in r)"function"==typeof r[i]?r[i](e):e[o][i]=r[i];else t||-1!==o.indexOf("-")?e.setAttribute(o,r):e[o]=r},E=function(e,n){for(var t=null,r=0;r<n.length;r++)Array.isArray(n[r])?E(e,n[r]):n[r]instanceof Function?n[r](e):null!=n[r]&&(t=n[r].$props,e.appendChild(n[r]instanceof Node?n[r]:document.createTextNode(n[r])),t&&t.didMount&&t.didMount(e,n[r]))},C=function(e){var n,t=p().Symbol;return"function"==typeof t?t.observable?n=t.observable:(n=t("observable"),t.observable=n):n="@@observable",n}(),A=function(e){this.isUnsubscribed=!1,this.handlers=null,this._unsubscribe=null,this.handlers=e,this.isUnsubscribed=!1};A.prototype.next=function(e){this.handlers.next&&!this.isUnsubscribed&&this.handlers.next(e)},A.prototype.error=function(e){this.isUnsubscribed||(this.handlers.error&&this.handlers.error(e),this.unsubscribe())},A.prototype.complete=function(){this.isUnsubscribed||(this.handlers.complete&&this.handlers.complete(),this.unsubscribe())},A.prototype.unsubscribe=function(){this.isUnsubscribed=!0,this._unsubscribe&&this._unsubscribe()};var w=function(e){this._subscribe=null,this._subscribe=e};w.prototype.subscribe=function(e){var n=new A(e);return n._unsubscribe=this._subscribe(n),{unsubscribe:function(){n.unsubscribe()}}},w.prototype[C]=function(){return this},exports.fidan={value:n,array:t,on:function(e,n,t){e.$val.on(n,t)},off:function(e,n,t){e.$val.off(n,t)},compute:r,initCompute:o,computeReturn:function(e){for(var n=[],t=arguments.length-1;t-- >0;)n[t]=arguments[t+1];return o.apply(void 0,[e].concat(n))},setCompute:function(e,n){for(var t=[],r=arguments.length-2;r-- >0;)t[r]=arguments[r+2];return i(e),o.apply(void 0,[e,n].concat(t))},destroy:i,insertToDom:u,arrayMap:l,html:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var t=e[0].slice(),r=e.slice(1),o=null,i=0,u=0;u<t.length;u++){var l=t[u],a=r[u];if(void 0===a)break;var p=a.hasOwnProperty("$val");p&&(void 0===a.$indexes&&(a.$indexes=[]),a.$indexes.push(u)),l.endsWith('="')?(i=l.lastIndexOf(" ")+1,o=l.substr(i,l.length-i-2),f(t,u,"\x3c!-- cmt_2_"+u+"_"+o+" --\x3e")):t[u]=l+"\x3c!-- cmt_"+("function"!=typeof a||p?"object"==typeof a?8:1:4)+"_"+u+" --\x3e"}(s=s.cloneNode(!1)).innerHTML=t.join("");var h=s.content;return h.$params=r,c||d(h,r),h},htmlArrayMap:function(e,n,r){if(Array.isArray(e)){var o=t(e);["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"].forEach(function(n){return e[n]=o.$val[n]}),e=o}return r?function(t){var r=null,o=null,i=[];l(e,t.parentElement,function(e,t){var u=null;if(null===r){for(var l in c=!0,u=n(e),c=!1,o=u.$params,e)for(var a=e[l].$indexes,s=0;s<a.length;s++)i.push(a[s],l);r=u.cloneNode(!0)}else u=r.cloneNode(!0);for(s=0;s<i.length;s+=2)o[i[s]]=e[i[s+1]];return d(u,o),u})}:function(t){l(e,t.parentElement,n)}},setDefaults:function(e,n){for(var t in n)void 0===e[t]&&(e[t]=n[t])},mapProperty:function(e,t,r){var o=Object.getOwnPropertyDescriptor(e,t);o.configurable?Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:function(){return r.$val},set:r}):o.set.depends.push(n(function(){r(e[t])}))},jsRoot:p,Fragment:N,conditionalElement:function(e,n,t){e.$props&&y(e.$props.$context);var r=t();return e.$props&&x(e.$props.$context),r instanceof Node==0&&(r=document.createTextNode(r||"")),n?e.replaceChild(r,n):e.appendChild(r),r},setElementAttributes:O,createElement:function(e,n){for(var t=[],r=arguments.length-2;r-- >0;)t[r]=arguments[r+2];var o=null;return e instanceof Function?(null===n&&(n={}),t&&t.length&&(n.children=t),b(n),(o=e(n))&&(o.$props=n)):(e===N?o=document.createDocumentFragment():(o=document.createElement(e),n&&O(o,n,-1!==e.indexOf("-"))),o.$props=n,t&&t.length&&E(o,t)),o},createSvgElement:function(e,n){for(var t=[],r=arguments.length-2;r-- >0;)t[r]=arguments[r+2];var o=document.createElementNS("http://www.w3.org/2000/svg",e);return n&&(n.className&&(n.class=n.className,delete n.className),O(o,n,!0)),o.$props=n,t&&t.length&&E(o,t),o},addChildElements:E,createTextNode:function(e){return e.appendChild(document.createTextNode(""))},cloneElement:function(e,n){return e=e.cloneNode(!0),n&&O(e,n,!1),e},startContext:m,getContextValue:function(e,n){return n&&n.$context[e]?n.$context[e]:v[e]?v[e][v[e].length-1]:void 0},injectContexts:b,endContext:g,activateContext:y,deactivateContext:x,Context:function(e){return null},toObservable:function(e){return new w(function(t){var r=n(function(){t.next(e.$val)});e.depends.push(r)})},VERSION:"0.0.4"};
//# sourceMappingURL=index.js.map
