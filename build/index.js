function e(e){var n=this,t=[],r={itemadded:[],itemremoved:[],itemset:[],beforemulti:[],aftermulti:[]};function i(e){e in n||Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){return t[e]},set:function(n){t[e]=n,o({type:"itemset",index:e,item:n})}})}function o(e){r[e.type].forEach(function(t){t.call(n,e)})}n.on=function(e,n){r[e].push(n)},n.off=function(e,n){for(var t=r[e],i=t.length;--i>=0;)t[i]===n&&t.splice(i,1)},n.push=function(){var e,n=arguments;arguments.length>1&&o({type:"beforemulti"});for(var r=0,l=arguments.length;r<l;r++)e=t.length,t.push(n[r]),i(e),o({type:"itemadded",index:e,item:n[r]});return arguments.length>1&&o({type:"aftermulti"}),t.length},n.pop=function(){if(t.length>-1){var e=t.length-1,r=t.pop();return delete n[e],o({type:"itemremoved",index:e,item:r}),r}},n.unshift=function(){for(var e=arguments,n=0,r=arguments.length;n<r;n++)t.splice(n,0,e[n]),i(t.length-1),o({type:"itemadded",index:n,item:e[n]});for(;n<t.length;n++)o({type:"itemset",index:n,item:t[n]});return t.length},n.shift=function(){if(t.length>-1){var e=t.shift();return delete n[t.length],o({type:"itemremoved",index:0,item:e}),e}},n.splice=function(e,r){var l,u=arguments,a=[];for(e=null==e?0:e<0?t.length+e:e,r=null==r?t.length-e:r>0?r:0;r--;)l=t.splice(e,1)[0],a.push(l),delete n[t.length],o({type:"itemremoved",index:e+a.length-1,item:l});for(var s=2,c=arguments.length;s<c;s++)t.splice(e,0,u[s]),i(t.length-1),o({type:"itemadded",index:e,item:u[s]}),e++;return a},Object.defineProperty(n,"length",{configurable:!1,enumerable:!1,get:function(){return t.length},set:function(e){var r=Number(e),i=t.length;if(!(r%1==0&&r>=0))throw new RangeError("Invalid array length");return r<i?n.splice(r):r>i&&n.push.apply(n,new Array(r-i)),t.length=r,e}}),Object.defineProperty(n,"innerArray",{configurable:!1,enumerable:!1,get:function(){return t},set:function(e){t=e;for(var n=0;n<e.length;n++)i(n)}}),Object.getOwnPropertyNames(Array.prototype).forEach(function(e){e in n||Object.defineProperty(n,e,{configurable:!1,enumerable:!1,writable:!1,value:Array.prototype[e]})}),n.toJSON=function(){return t},Array.isArray(e)&&n.push.apply(n,e)}var n=function(e,n){if(e&&null!=e.$val)throw"Fidan: Higher ordered signals is not supported.";var t=function(e){if(void 0===e)return t.$val;var n=t.depends;if(n.length)for(var r=0;r<n.length;r++)!n[r].freezed&&n[r](n[r].compute(e,t.$val));Array.isArray(e)?t.$val.innerArray=e:t.$val=e};return t.$val=e,t.freezed=n,t.depends=[],t.toString=t.toJSON=function(){return t.$val.toString()},t},t=function(t){var r=n(new e(t));return r.on=r.$val.on,r.off=r.$val.off,r.toJSON=function(){return r.$val.innerArray},r},r=function(e,t){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];var o=n();o.compute=t,r.splice(0,0,e);for(var l=0;l<r.length;l++)r[l].depends.push(o);t(e.$val)},i=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var o=n(e());return r.apply(void 0,[null,function(){o(e())}].concat(t)),o},o=function(e){delete e.compute,delete e.depends},l=function(e,n,t){var r=typeof t;"function"===r?t(e):("object"!==r&&(t=document.createTextNode(t)),e.insertBefore(t,e.children[n]))},u=function(n,t,i){var o=n.$val instanceof e?n.$val:new e(n.$val),u=n.$val,a=null;o.on("beforemulti",function(){t.parentNode&&(a={parent:t,next:t.nextElementSibling},t=document.createDocumentFragment())}),o.on("aftermulti",function(){a&&(a.parent.insertBefore(t,a.next),t=a.parent)}),o.on("itemadded",function(e){l(t,e.index,i(e.item,e.index))}),o.on("itemset",function(e){t.replaceChild(i(e.item,e.index),t.children.item(e.index))}),o.on("itemremoved",function(e){t.removeChild(t.children.item(e.index))}),n(o);var s=void 0;r(n,function(e){void 0===s&&e&&e.length>0&&(s=document.createDocumentFragment()),function(e,n,t,r,o,l,u){if(0!==t.length){if(n.length>t.length)for(var a,s=n.length,c=void 0!==u?u.previousSibling:e.lastChild;s>t.length;)a=c.previousSibling,e.removeChild(c),c=a,s--;var f=e.firstChild;f===u&&(f=void 0);for(var d=0,p=void 0,h=f,v=u?1:0;d<t.length;d++)p=t[d],h?o(p,n[d]):(h=i(p),v?e.insertBefore(h,u):e.appendChild(h)),(h=h.nextSibling)===u&&(h=null)}else if(void 0!==u){var m,b=e.firstChild;for(void 0===u&&(u=null);b!==u;)m=b.nextSibling,e.removeChild(b),b=m}else e.textContent=""}(s||t,u.innerArray,e||[],0,function(e,n){for(var t in e)n[t].hasOwnProperty("$val")&&(e[t].depends=n[t].depends,n[t](e[t]()))}),s&&(t.appendChild(s),s=null)})},a={id:!0,nodeValue:!0,textContent:!0,className:!0,innerHTML:!0,innerText:!0,tabIndex:!0,value:!0},s=!1,c=document.createElement("template"),f=function(e,n,t){for(var r=n;r>=0;r--){var i=e[r],o=i.lastIndexOf("<");if(-1!==o){e[r]=i.substr(0,o)+t+i.substr(o);break}}},d=function(e,n){var t=[];!function(e,n){for(var t=document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,{acceptNode:function(e){return e.nodeValue.trim().startsWith("cmt_")?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},!1);t.nextNode();)n.push(t.currentNode)}(e,t);for(var i=function(e){var i=t[e],o=i.nodeValue,l=null,u=null,s=o.indexOf("_")+1,c=o.indexOf("_",s),f=parseInt(o.substr(s,c-s));s=o.indexOf("_",c)+1,-1===(c=o.indexOf("_",s))&&(c=o.indexOf(" ",s));var d=parseInt(o.substr(s,c-s)),p=n[d];if(3&f){if(1===f){if(u="textContent",l=document.createTextNode(p.$val),i.parentElement.insertBefore(l,i.nextSibling),!p.hasOwnProperty("$val")&&Array.isArray(p))for(var h=0;h<p.length;h++)i.parentElement.appendChild(p[h])}else 2===f&&(u=o.substr(c+1,o.length-c-2),l=i.nextElementSibling);u.startsWith("on")?l.addEventListener(u.substr(2),p):p.hasOwnProperty("$val")?r(p,a[u]?function(e){l[u]=e}:function(e){l.setAttribute(u,e)}):a[u]?l[u]=p:l.setAttribute(u,p)}else 4===f?p(i):8===f&&i.parentElement.insertBefore(p,i.nextSibling)},o=0;o<t.length;o++)i(o)},p=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()},h=[],v={},m=function(e,n){v[e]||(v[e]=[]),v[e].push(n),h.push(e)},b=function(e){e.$context||Object.defineProperty(e,"$context",{configurable:!1,enumerable:!1,value:{}});for(var n=null,t=0;t<h.length;t++)e.$context[n=h[t]]=v[n][v[n].length-1]},g=function(e){v[e].pop(),h.pop()},y=function(e){for(var n in e)m(n,e[n])},x=function(e){for(var n in e)g(n)},$=/^on[A-Z]/,C=Symbol("fjsx.Fragment"),N=function(e,n,t){var r=null;for(var i in n)if(null!=(r=n[i]))if(r instanceof Function)$.test(i)?e[i=i.toLowerCase()]=r:r(e);else if(r instanceof Object)if(Array.isArray(r))O(e,r);else for(var o in r)"function"==typeof r[o]?r[o](e):e[i][o]=r[o];else t||-1!==i.indexOf("-")?e.setAttribute(i,r):e[i]=r},O=function(e,n){for(var t=null,r=0;r<n.length;r++)Array.isArray(n[r])?O(e,n[r]):n[r]instanceof Function?n[r](e):null!=n[r]&&(t=n[r].$props,e.appendChild(n[r]instanceof Node?n[r]:document.createTextNode(n[r])),t&&t.didMount&&t.didMount(e,n[r]))},E=function(e){var n,t=p().Symbol;return"function"==typeof t?t.observable?n=t.observable:(n=t("observable"),t.observable=n):n="@@observable",n}(),A=function(e){this.isUnsubscribed=!1,this.handlers=null,this._unsubscribe=null,this.handlers=e,this.isUnsubscribed=!1};A.prototype.next=function(e){this.handlers.next&&!this.isUnsubscribed&&this.handlers.next(e)},A.prototype.error=function(e){this.isUnsubscribed||(this.handlers.error&&this.handlers.error(e),this.unsubscribe())},A.prototype.complete=function(){this.isUnsubscribed||(this.handlers.complete&&this.handlers.complete(),this.unsubscribe())},A.prototype.unsubscribe=function(){this.isUnsubscribed=!0,this._unsubscribe&&this._unsubscribe()};var w=function(e){this._subscribe=null,this._subscribe=e};w.prototype.subscribe=function(e){var n=new A(e);return n._unsubscribe=this._subscribe(n),{unsubscribe:function(){n.unsubscribe()}}},w.prototype[E]=function(){return this},exports.fidan={value:n,array:t,on:function(e,n,t){e.$val.on(n,t)},off:function(e,n,t){e.$val.off(n,t)},compute:r,initCompute:i,computeReturn:function(e){for(var n=[],t=arguments.length-1;t-- >0;)n[t]=arguments[t+1];return i.apply(void 0,[e].concat(n))},setCompute:function(e,n){for(var t=[],r=arguments.length-2;r-- >0;)t[r]=arguments[r+2];return o(e),i.apply(void 0,[e,n].concat(t))},destroy:o,insertToDom:l,arrayMap:u,html:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var t=e[0].slice(),r=e.slice(1),i=null,o=0,l=0;l<t.length;l++){var u=t[l],a=r[l];if(void 0===a)break;var p=a.hasOwnProperty("$val");p&&(void 0===a.$indexes&&(a.$indexes=[]),a.$indexes.push(l)),u.endsWith('="')?(o=u.lastIndexOf(" ")+1,i=u.substr(o,u.length-o-2),f(t,l,"\x3c!-- cmt_2_"+l+"_"+i+" --\x3e")):t[l]=u+"\x3c!-- cmt_"+("function"!=typeof a||p?"object"==typeof a?8:1:4)+"_"+l+" --\x3e"}(c=c.cloneNode(!1)).innerHTML=t.join("");var h=c.content;return h.$params=r,s||d(h,r),h},htmlArrayMap:function(e,n,r){if(Array.isArray(e)){var i=t(e);["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"].forEach(function(n){return e[n]=i.$val[n]}),e=i}return r?function(t){var r=null,i=null,o=[];u(e,t.parentElement,function(e,t){var l=null;if(null===r){for(var u in s=!0,l=n(e),s=!1,i=l.$params,e)for(var a=e[u].$indexes,c=0;c<a.length;c++)o.push(a[c],u);r=l.cloneNode(!0)}else l=r.cloneNode(!0);for(c=0;c<o.length;c+=2)i[o[c]]=e[o[c+1]];return d(l,i),l})}:function(t){u(e,t.parentElement,n)}},setDefaults:function(e,n){for(var t in n)void 0===e[t]&&(e[t]=n[t])},mapProperty:function(e,t,r){var i=Object.getOwnPropertyDescriptor(e,t);i.configurable?Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:function(){return r.$val},set:r}):i.set.depends.push(n(function(){r(e[t])}))},jsRoot:p,Fragment:C,conditionalElement:function(e,n,t){e.$props&&y(e.$props.$context);var r=t();return e.$props&&x(e.$props.$context),r instanceof Node==0&&(r=document.createTextNode(r||"")),n?e.replaceChild(r,n):e.appendChild(r),r},setElementAttributes:N,createElement:function(e,n){for(var t=[],r=arguments.length-2;r-- >0;)t[r]=arguments[r+2];var i=null;return e instanceof Function?(null===n&&(n={}),t&&t.length&&(n.children=t),b(n),(i=e(n))&&(i.$props=n)):(e===C?i=document.createDocumentFragment():(i=document.createElement(e),n&&N(i,n,-1!==e.indexOf("-"))),i.$props=n,t&&t.length&&O(i,t)),i},createSvgElement:function(e,n){for(var t=[],r=arguments.length-2;r-- >0;)t[r]=arguments[r+2];var i=document.createElementNS("http://www.w3.org/2000/svg",e);return n&&(n.className&&(n.class=n.className,delete n.className),N(i,n,!0)),i.$props=n,t&&t.length&&O(i,t),i},addChildElements:O,createTextNode:function(e){return e.appendChild(document.createTextNode(""))},cloneElement:function(e,n){return e=e.cloneNode(!0),n&&N(e,n,!1),e},startContext:m,getContextValue:function(e,n){return n&&n.$context[e]?n.$context[e]:v[e]?v[e][v[e].length-1]:void 0},injectContexts:b,endContext:g,activateContext:y,deactivateContext:x,Context:function(e){return null},toObservable:function(e){return new w(function(t){var r=n(function(){t.next(e.$val)});e.depends.push(r)})},VERSION:"0.0.4"};
//# sourceMappingURL=index.js.map
