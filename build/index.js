var e,t=(e=require("symbol-observable"))&&"object"==typeof e&&"default"in e?e.default:e;function n(e){var t=this,n=[],r={itemadded:[],itemremoved:[],itemset:[],beforemulti:[],aftermulti:[]};function o(e){e in t||Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return n[e]},set:function(t){n[e]=t,i({type:"itemset",index:e,item:t})}})}function i(e){r[e.type].forEach(function(n){n.call(t,e)})}t.on=function(e,t){r[e].push(t)},t.off=function(e,t){for(var n=r[e],o=n.length;--o>=0;)n[o]===t&&n.splice(o,1)},t.push=function(){var e,t=arguments;arguments.length>1&&i({type:"beforemulti"});for(var r=0,u=arguments.length;r<u;r++)e=n.length,n.push(t[r]),o(e),i({type:"itemadded",index:e,item:t[r]});return arguments.length>1&&i({type:"aftermulti"}),n.length},t.pop=function(){if(n.length>-1){var e=n.length-1,r=n.pop();return delete t[e],i({type:"itemremoved",index:e,item:r}),r}},t.unshift=function(){for(var e=arguments,t=0,r=arguments.length;t<r;t++)n.splice(t,0,e[t]),o(n.length-1),i({type:"itemadded",index:t,item:e[t]});for(;t<n.length;t++)i({type:"itemset",index:t,item:n[t]});return n.length},t.shift=function(){if(n.length>-1){var e=n.shift();return delete t[n.length],i({type:"itemremoved",index:0,item:e}),e}},t.splice=function(e,r){var u,c=arguments,a=[];for(e=null==e?0:e<0?n.length+e:e,r=null==r?n.length-e:r>0?r:0;r--;)u=n.splice(e,1)[0],a.push(u),delete t[n.length],i({type:"itemremoved",index:e+a.length-1,item:u});for(var l=2,s=arguments.length;l<s;l++)n.splice(e,0,c[l]),o(n.length-1),i({type:"itemadded",index:e,item:c[l]}),e++;return a},Object.defineProperty(t,"length",{configurable:!1,enumerable:!1,get:function(){return n.length},set:function(e){var r=Number(e),o=n.length;if(!(r%1==0&&r>=0))throw new RangeError("Invalid array length");return r<o?t.splice(r):r>o&&t.push.apply(t,new Array(r-o)),n.length=r,e}}),Object.defineProperty(t,"innerArray",{configurable:!1,enumerable:!1,get:function(){return n},set:function(e){n=e;for(var t=0;t<e.length;t++)o(t)}}),Object.getOwnPropertyNames(Array.prototype).forEach(function(e){e in t||Object.defineProperty(t,e,{configurable:!1,enumerable:!1,writable:!1,value:Array.prototype[e]})}),t.toJSON=function(){return n},e instanceof Array&&t.push.apply(t,e)}var r=function(e,t){if(e&&null!=e.$val)throw"Fidan: Higher ordered signals is not supported.";var n=function(e){Array.isArray(e)?n.$val.innerArray=e:n.$val=e;var t=n.depends;if(t.length)for(var r=0;r<t.length;r++)!t[r].freezed&&t[r](t[r].compute())};return n.$val=e,n.freezed=t,n.depends=[],n.toString=n.toJSON=function(){return n.$val.toString()},n},o=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var o=r();o.compute=e;for(var i=0;i<t.length;i++)t[i].depends.push(o);e()},i=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var i=r(e());return o.apply(void 0,[function(){i(e())}].concat(t)),i},u=function(e){delete e.compute,delete e.depends},c=[],a={},l=function(e,t){a[e]||(a[e]=[]),a[e].push(t),c.push(e)},s=function(e){e.$context||Object.defineProperty(e,"$context",{configurable:!1,enumerable:!1,value:{}});for(var t=null,n=0;n<c.length;n++)e.$context[t=c[n]]=a[t][a[t].length-1]},f=function(e){a[e].pop(),c.pop()},d=function(e){for(var t in e)l(t,e[t])},p=function(e){for(var t in e)f(t)},h=function(e,t,n){n instanceof Function?n(e):(n instanceof Node==!1&&(n=document.createTextNode(n)),e.insertBefore(n,e.childNodes[t]))},m=/^on[A-Z]/,v=Symbol("fjsx.Fragment"),b=function(e,t,n){var r=null;for(var o in t)if(null!=(r=t[o]))if(r instanceof Function)m.test(o)?e[o=o.toLowerCase()]=r:r(e);else if(r instanceof Object)if(Array.isArray(r))g(e,r);else for(var i in r)"function"==typeof r[i]?r[i](e):e[o][i]=r[i];else n||-1!==o.indexOf("-")?e.setAttribute(o,r):e[o]=r},g=function(e,t){for(var n=null,r=0;r<t.length;r++)Array.isArray(t[r])?g(e,t[r]):t[r]instanceof Function?t[r](e):void 0!==t[r]&&(n=t[r].$props,e.appendChild(t[r]instanceof Node?t[r]:document.createTextNode(t[r])),n&&n.didMount&&n.didMount(e,t[r]))},y=function(e){this.isUnsubscribed=!1,this.handlers=null,this._unsubscribe=null,this.handlers=e,this.isUnsubscribed=!1};y.prototype.next=function(e){this.handlers.next&&!this.isUnsubscribed&&this.handlers.next(e)},y.prototype.error=function(e){this.isUnsubscribed||(this.handlers.error&&this.handlers.error(e),this.unsubscribe())},y.prototype.complete=function(){this.isUnsubscribed||(this.handlers.complete&&this.handlers.complete(),this.unsubscribe())},y.prototype.unsubscribe=function(){this.isUnsubscribed=!0,this._unsubscribe&&this._unsubscribe()};var x=function(e){this._subscribe=null,this._subscribe=e};x.prototype.subscribe=function(e){var t=new y(e);return t._unsubscribe=this._subscribe(t),{unsubscribe:function(){t.unsubscribe()}}},x.prototype[t]=function(){return this};var $={value:r,array:function(e){var t=r(new n(e));return t.on=t.$val.on,t.off=t.$val.off,t.toJSON=function(){return t.$val.innerArray},t},on:function(e,t,n){e.$val.on(t,n)},off:function(e,t,n){e.$val.off(t,n)},compute:o,initCompute:i,computeReturn:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return i.apply(void 0,[e].concat(t))},setCompute:function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return u(e),i.apply(void 0,[e,t].concat(n))},destroy:u,conditionalElement:function(e,t,n){e.$props&&d(e.$props.$context);var r=n();return e.$props&&p(e.$props.$context),r instanceof Node==0&&(r=document.createTextNode(r||"")),t?e.replaceChild(r,t):e.appendChild(r),r},insertToDom:h,arrayMap:function(e,t,r){var i=e.$val instanceof n?e.$val:new n(e.$val),u=null;i.on("beforemulti",function(){t.parentNode&&(u={parent:t,next:t.nextSibling},t=document.createDocumentFragment())}),i.on("aftermulti",function(){u&&(u.parent.insertBefore(t,u.next),t=u.parent)}),i.on("itemadded",function(e){h(t,e.index,r(e.item,e.index))}),i.on("itemset",function(e){t.replaceChild(r(e.item,e.index),t.childNodes.item(e.index))}),i.on("itemremoved",function(e){t.removeChild(t.childNodes.item(e.index))}),e(i);o(function(){if(0===e.$val.length)t.textContent="";else{var n=document.createDocumentFragment();t.textContent="";for(var o=t.childElementCount;o<e.$val.length;o++)h(n,o,r(e.$val[o],o));t.appendChild(n)}},e)},Fragment:v,setElementAttributes:b,createElement:function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];var o=null;return e instanceof Function?(null===t&&(t={}),n&&n.length&&(t.children=n),s(t),(o=e(t))&&(o.$props=t)):(e===v?o=document.createDocumentFragment():(o=document.createElement(e),t&&b(o,t,-1!==e.indexOf("-"))),o.$props=t,n&&n.length&&g(o,n)),o},createSvgElement:function(e,t){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];var o=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&(t.className&&(t.class=t.className,delete t.className),b(o,t,!0)),o.$props=t,n&&n.length&&g(o,n),o},addChildElements:g,createTextNode:function(e){return e.appendChild(document.createTextNode(""))},cloneElement:function(e,t){return e=e.cloneNode(!0),t&&b(e,t,!1),e},startContext:l,getContextValue:function(e,t){return t&&t.$context[e]?t.$context[e]:a[e]?a[e][a[e].length-1]:void 0},injectContexts:s,endContext:f,activateContext:d,deactivateContext:p,Context:function(e){return null},toObservable:function(e){return new x(function(t){var n=r(function(){t.next(e.$val)});e.depends.push(n)})},setDefaults:function(e,t){for(var n in t)void 0===e[n]&&(e[n]=t[n])},mapProperty:function(e,t,n){var o=Object.getOwnPropertyDescriptor(e,t);o.configurable?Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:function(){return n.$val},set:n}):o.set.depends.push(r(function(){n(e[t])}))},VERSION:"0.0.1"};exports.fidan=$;
//# sourceMappingURL=index.js.map
