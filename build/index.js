function e(e){var n=this,t=[];function r(e){e in n||Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){return t[e]},set:function(n){t[e]=n,o({type:"itemset",index:e,item:n})}})}function o(e){n._handlers[e.type].forEach(function(t){t.call(n,e)})}n._handlers={itemadded:[],itemremoved:[],itemset:[],beforemulti:[],aftermulti:[]},n.on=function(e,t){n._handlers[e].push(t)},n.off=function(e,t){for(var r=n._handlers[e],o=r.length;--o>=0;)r[o]===t&&r.splice(o,1)},n.push=function(){var e,n=arguments;arguments.length>1&&o({type:"beforemulti"});for(var i=0,l=arguments.length;i<l;i++)e=t.length,t.push(n[i]),r(e),o({type:"itemadded",index:e,item:n[i]});return arguments.length>1&&o({type:"aftermulti"}),t.length},n.pop=function(){if(t.length>-1){var e=t.length-1,r=t.pop();return delete n[e],o({type:"itemremoved",index:e,item:r}),r}},n.unshift=function(){for(var e=arguments,n=0,i=arguments.length;n<i;n++)t.splice(n,0,e[n]),r(t.length-1),o({type:"itemadded",index:n,item:e[n]});for(;n<t.length;n++)o({type:"itemset",index:n,item:t[n]});return t.length},n.shift=function(){if(t.length>-1){var e=t.shift();return delete n[t.length],o({type:"itemremoved",index:0,item:e}),e}},n.splice=function(e,i){var l,u=arguments,a=[];for(e=null==e?0:e<0?t.length+e:e,i=null==i?t.length-e:i>0?i:0;i--;)l=t.splice(e,1)[0],a.push(l),delete n[t.length],o({type:"itemremoved",index:e+a.length-1,item:l});for(var s=2,c=arguments.length;s<c;s++)t.splice(e,0,u[s]),r(t.length-1),o({type:"itemadded",index:e,item:u[s]}),e++;return a},Object.defineProperty(n,"length",{configurable:!1,enumerable:!1,get:function(){return t.length},set:function(e){var r=Number(e),o=t.length;if(!(r%1==0&&r>=0))throw new RangeError("Invalid array length");return r<o?n.splice(r):r>o&&n.push.apply(n,new Array(r-o)),t.length=r,e}}),Object.defineProperty(n,"innerArray",{configurable:!1,enumerable:!1,get:function(){return t},set:function(e){t=e;for(var n=0;n<e.length;n++)r(n)}}),Object.getOwnPropertyNames(Array.prototype).forEach(function(e){e in n||Object.defineProperty(n,e,{configurable:!1,enumerable:!1,writable:!1,value:Array.prototype[e]})}),n.setEventsFrom=function(e){n.on=e.on,n.off=e.off,n._handlers=e._handlers},n.toJSON=function(){return t},Array.isArray(e)&&n.push.apply(n,e)}var n=function(n){var t=function(n){if(void 0===n)return t.$val;if(Array.isArray(n))(n=new e(n.slice(0))).setEventsFrom(t.$val);else if(n&&n.hasOwnProperty("innerArray")){var r=new e(n.innerArray.slice(0));r.setEventsFrom(n),n=r}var o=t.bc_depends;if(o.length)for(var i=0;i<o.length;i++)o[i].beforeCompute(n,t.$val,t);if(t.$val=n,(o=t.c_depends).length)for(i=0;i<o.length;i++)o[i](o[i].compute(n))};return t.$val=n,t.bc_depends=[],t.c_depends=[],t.toString=t.toJSON=function(){return t.$val.toString()},t},t=function(e,t){for(var r=[],o=arguments.length-2;o-- >0;)r[o]=arguments[o+2];var i=n(void 0);i.compute=t,i(t(e.$val,i)),r.splice(0,0,e);for(var l=0;l<r.length;l++)r[l].c_depends.push(i);return i},r=function(e,t){for(var r=[],o=arguments.length-2;o-- >0;)r[o]=arguments[o+2];var i=n(void 0);i.beforeCompute=t,i(t(e.$val,void 0,i)),r.splice(0,0,e);for(var l=0;l<r.length;l++)r[l].bc_depends.push(i);return i},o=function(e,n,t){var r=typeof t;"function"===r?t(e):("object"!==r&&(t=document.createTextNode(t)),e.insertBefore(t,e.children[n]))},i=function(e,n,t,i){var l=null;e.$val.on("beforemulti",function(){n.parentNode&&(l={parent:n,next:n.nextElementSibling},n=document.createDocumentFragment())}),e.$val.on("aftermulti",function(){l&&(l.parent.insertBefore(n,l.next),n=l.parent)}),e.$val.on("itemadded",function(e){o(n,e.index,t(e.item,e.index))}),e.$val.on("itemset",function(e){n.replaceChild(t(e.item,e.index),n.children.item(e.index))}),e.$val.on("itemremoved",function(e){n.removeChild(n.children.item(e.index))});var u=void 0;r(e,function(r){if(i)void 0===u&&r&&r.length>0&&(u=document.createDocumentFragment()),function(e,n,r,o,i,l,u){if(0!==r.length){if(n.length>r.length)for(var a,s=n.length,c=void 0!==u?u.previousSibling:e.lastChild;s>r.length;)a=c.previousSibling,e.removeChild(c),c=a,s--;var f=e.firstChild;f===u&&(f=void 0);for(var d=0,p=void 0,h=f,v=u?1:0;d<r.length;d++)p=r[d],h?i(p,n[d]):(h=t(p),v?e.insertBefore(h,u):e.appendChild(h)),(h=h.nextSibling)===u&&(h=null)}else if(void 0!==u){var m,b=e.firstChild;for(void 0===u&&(u=null);b!==u;)m=b.nextSibling,e.removeChild(b),b=m}else e.textContent=""}(u||n,e.$val.innerArray,r||[],0,function(e,n){for(var t in e)n[t].hasOwnProperty("$val")&&(e[t].depends=n[t].depends,n[t](e[t]()))}),u&&(n.appendChild(u),u=null);else{var o=document.createDocumentFragment();n.textContent="";for(var l=0;l<r.length;l++)o.appendChild(t(r[l]));n.appendChild(o)}})},l={id:!0,nodeValue:!0,textContent:!0,className:!0,innerHTML:!0,innerText:!0,tabIndex:!0,value:!0},u=!1,a=document.createElement("template"),s=function(e,n,t){for(var r=n;r>=0;r--){var o=e[r],i=o.lastIndexOf("<");if(-1!==i){e[r]=o.substr(0,i)+t+o.substr(i);break}}},c=function(e,n){var r=[];!function(e,n){for(var t=document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,{acceptNode:function(e){return e.nodeValue.trim().startsWith("cmt_")?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},!1);t.nextNode();)n.push(t.currentNode)}(e,r);for(var o=function(e){var o=r[e],i=o.nodeValue,u=null,a=null,s=i.indexOf("_")+1,c=i.indexOf("_",s),f=parseInt(i.substr(s,c-s));s=i.indexOf("_",c)+1,-1===(c=i.indexOf("_",s))&&(c=i.indexOf(" ",s));var d=parseInt(i.substr(s,c-s)),p=n[d];if(3&f){if(1===f){if(a="textContent",u=document.createTextNode(p.$val),o.parentElement.insertBefore(u,o.nextSibling),!p.hasOwnProperty("$val")&&Array.isArray(p))for(var h=0;h<p.length;h++)o.parentElement.appendChild(p[h])}else 2===f&&(a=i.substr(c+1,i.length-c-2),u=o.nextElementSibling);a.startsWith("on")?u.addEventListener(a.substr(2),p):p.hasOwnProperty("$val")?l[a]?t(p,function(e){u[a]=e}).name$="["+a+"]":t(p,function(e){u.setAttribute(a,e)}).name$="attr("+a+")":l[a]?u[a]=p:u.setAttribute(a,p)}else 4===f?p(o):8===f&&o.parentElement.insertBefore(p,o.nextSibling)},i=0;i<r.length;i++)o(i)},f=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")()},d=[],p={},h=function(e,n){p[e]||(p[e]=[]),p[e].push(n),d.push(e)},v=function(e){e.$context||Object.defineProperty(e,"$context",{configurable:!1,enumerable:!1,value:{}});for(var n=null,t=0;t<d.length;t++)e.$context[n=d[t]]=p[n][p[n].length-1]},m=function(e){p[e].pop(),d.pop()},b=function(e){for(var n in e)h(n,e[n])},g=function(e){for(var n in e)m(n)},x=/^on[A-Z]/,y=Symbol("fjsx.Fragment"),$=function(e,n,t){var r=null;for(var o in n)if(null!=(r=n[o]))if(r instanceof Function)x.test(o)?e[o=o.toLowerCase()]=r:r(e);else if(r instanceof Object)if(Array.isArray(r))C(e,r);else for(var i in r)"function"==typeof r[i]?r[i](e):e[o][i]=r[i];else t||-1!==o.indexOf("-")?e.setAttribute(o,r):e[o]=r},C=function(e,n){for(var t=null,r=0;r<n.length;r++)Array.isArray(n[r])?C(e,n[r]):n[r]instanceof Function?n[r](e):null!=n[r]&&(t=n[r].$props,e.appendChild(n[r]instanceof Node?n[r]:document.createTextNode(n[r])),t&&t.didMount&&t.didMount(e,n[r]))},_=function(e){var n,t=f().Symbol;return"function"==typeof t?t.observable?n=t.observable:(n=t("observable"),t.observable=n):n="@@observable",n}(),N=function(e){this.isUnsubscribed=!1,this.handlers=null,this._unsubscribe=null,this.handlers=e,this.isUnsubscribed=!1};N.prototype.next=function(e){this.handlers.next&&!this.isUnsubscribed&&this.handlers.next(e)},N.prototype.error=function(e){this.isUnsubscribed||(this.handlers.error&&this.handlers.error(e),this.unsubscribe())},N.prototype.complete=function(){this.isUnsubscribed||(this.handlers.complete&&this.handlers.complete(),this.unsubscribe())},N.prototype.unsubscribe=function(){this.isUnsubscribed=!0,this._unsubscribe&&this._unsubscribe()};var O=function(e){this._subscribe=null,this._subscribe=e};O.prototype.subscribe=function(e){var n=new N(e);return n._unsubscribe=this._subscribe(n),{unsubscribe:function(){n.unsubscribe()}}},O.prototype[_]=function(){return this},exports.fidan={array:function(t){var r=n(new e(t));return r.toJSON=function(){return r.$val.innerArray},r},value:n,computeBy:t,beforeComputeBy:r,compute:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];var o=n(void 0);o.compute=e,o(e(void 0,o));for(var i=0;i<t.length;i++)t[i].c_depends.push(o);return o},beforeCompute:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];var o=n(void 0);o.beforeCompute=e,o(e(void 0,void 0,o));for(var i=0;i<t.length;i++)t[i].bc_depends.push(o);return o},destroy:function(e){delete e.compute,delete e.c_depends},insertToDom:o,arrayMap:i,html:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var t=e[0].slice(),r=e.slice(1),o=null,i=0,l=0;l<t.length;l++){var f=t[l],d=r[l];if(void 0===d)break;var p=d.hasOwnProperty("$val");p&&(void 0===d.$indexes&&(d.$indexes=[]),d.$indexes.push(l)),f.endsWith('="')?(i=f.lastIndexOf(" ")+1,o=f.substr(i,f.length-i-2),s(t,l,"\x3c!-- cmt_2_"+l+"_"+o+" --\x3e")):t[l]=f+"\x3c!-- cmt_"+("function"!=typeof d||p?"object"==typeof d?8:1:4)+"_"+l+" --\x3e"}(a=a.cloneNode(!1)).innerHTML=t.join("");var h=a.content;return h.$params=r,u||c(h,r),h},htmlArrayMap:function(e,n,t){return(t=Object.assign({useCloneNode:!1,reuseMode:!1},t)).useCloneNode?function(r){var o=null,l=null,a=[];i(e,r.parentElement,function(e){var t=null;if(null===o){for(var r in u=!0,t=n(e),u=!1,l=t.$params,e){var i=e[r].$indexes;if(i)for(var s=0;s<i.length;s++)a.push(i[s],r)}o=t.cloneNode(!0)}else t=o.cloneNode(!0);for(s=0;s<a.length;s+=2)l[a[s]]=e[a[s+1]];return c(t,l),t},t.reuseMode)}:function(t){i(e,t.parentElement,n)}},setDefaults:function(e,n){for(var t in n)void 0===e[t]&&(e[t]=n[t])},mapProperty:function(e,t,r){var o=Object.getOwnPropertyDescriptor(e,t);o.configurable?Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:function(){return r.$val},set:r}):o.set.depends.push(n(function(){r(e[t])}))},jsRoot:f,Fragment:y,conditionalElement:function(e,n,t){e.$props&&b(e.$props.$context);var r=t();return e.$props&&g(e.$props.$context),r instanceof Node==0&&(r=document.createTextNode(r||"")),n?e.replaceChild(r,n):e.appendChild(r),r},setElementAttributes:$,createElement:function(e,n){for(var t=[],r=arguments.length-2;r-- >0;)t[r]=arguments[r+2];var o=null;return e instanceof Function?(null===n&&(n={}),t&&t.length&&(n.children=t),v(n),(o=e(n))&&(o.$props=n)):(e===y?o=document.createDocumentFragment():(o=document.createElement(e),n&&$(o,n,-1!==e.indexOf("-"))),o.$props=n,t&&t.length&&C(o,t)),o},createSvgElement:function(e,n){for(var t=[],r=arguments.length-2;r-- >0;)t[r]=arguments[r+2];var o=document.createElementNS("http://www.w3.org/2000/svg",e);return n&&(n.className&&(n.class=n.className,delete n.className),$(o,n,!0)),o.$props=n,t&&t.length&&C(o,t),o},addChildElements:C,createTextNode:function(e){return e.appendChild(document.createTextNode(""))},cloneElement:function(e,n){return e=e.cloneNode(!0),n&&$(e,n,!1),e},startContext:h,getContextValue:function(e,n){return n&&n.$context[e]?n.$context[e]:p[e]?p[e][p[e].length-1]:void 0},injectContexts:v,endContext:m,activateContext:b,deactivateContext:g,Context:function(e){return null},toObservable:function(e){return new O(function(t){var r=n(function(){t.next(e.$val)});e.depends.push(r)})},VERSION:"0.0.4"};
//# sourceMappingURL=index.js.map
